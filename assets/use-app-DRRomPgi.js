import{g as c,p,s as _,r as o,D as v,P as f,M as u,O as y}from"./index-Cb8ybpZu.js";const h=e=>c(`/apps/${e}`),b=e=>p("/apps",{body:e}),m=(e,s)=>p(`/apps/${e}`,{body:s}),C=e=>p(`/apps/${e}/delete`),A=e=>p(`/apps/${e}/copy`),D=e=>c("/apps",{params:e}),w=e=>c(`/apps/${e}/draft-app-config`),P=(e,s)=>p(`/apps/${e}/draft-app-config`,{body:s}),$=e=>c(`/apps/${e}/summary`),k=(e,s)=>p(`/apps/${e}/summary`,{body:{summary:s}}),W=(e,s,t,a)=>_(`/apps/${e}/conversations`,{body:{query:s,image_urls:t}},a),z=(e,s)=>p(`/apps/${e}/conversations/tasks/${s}/stop`),S=(e,s)=>c(`/apps/${e}/conversations/messages`,{params:s}),H=e=>p(`/apps/${e}/conversations/delete-debug-conversation`),U=e=>p(`/apps/${e}/publish`),T=e=>p(`/apps/${e}/cancel-publish`),G=(e,s)=>c(`/apps/${e}/publish-histories`,{params:s}),M=(e,s)=>p(`/apps/${e}/fallback-history`,{body:{app_config_version_id:s}}),x=e=>c(`/apps/${e}/published-config`),F=e=>p(`/apps/${e}/published-config/regenerate-web-app-token`),q=()=>{const e=o(!1),s=o({});return{loading:e,app:s,loadApp:async a=>{try{e.value=!0;const n=await h(a);s.value=n.data}finally{e.value=!1}}}},j=()=>{const e=o(!1),s=o([]),t={current_page:1,page_size:20,total_page:0,total_record:0},a=o({...t});return{loading:e,apps:s,paginator:a,loadApps:async(r=!1,i="")=>{if(r)a.value=t;else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const l=(await D({current_page:a.value.current_page,page_size:a.value.page_size,search_word:i})).data;a.value=l.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),r?s.value=l.list:s.value.push(...l.list)}finally{e.value=!1}}}},I=()=>{const e=v(),s=o(!1);return{loading:s,handleCreateApp:async a=>{try{s.value=!0;const n=await b(a);u.success("新增Agent应用成功"),await e.push({name:"space-apps-detail",params:{app_id:n.data.id}})}finally{s.value=!1}}}},B=()=>{const e=o(!1);return{loading:e,handleUpdateApp:async(t,a)=>{try{e.value=!0;const n=await m(t,a);u.success(n.message)}finally{e.value=!1}}}},E=()=>{const e=v(),s=o(!1);return{loading:s,handleCopyApp:async a=>{try{s.value=!0;const n=await A(a);u.success("创建应用副本成功"),await e.push({name:"space-apps-detail",params:{app_id:n.data.id}})}finally{s.value=!1}}}},J=()=>({handleDeleteApp:async(s,t)=>{y.warning({title:"要删除该应用吗?",content:"删除应用后，发布的WebApp、开放API以及关联的社交媒体平台均无法使用该Agent应用，如果需要暂停应用，可使用取消发布功能。",hideCancel:!1,onOk:async()=>{try{const a=await C(s);u.success(a.message)}finally{t&&t()}}})}}),K=()=>{const e=o(!1);return{loading:e,handlePublish:async t=>{try{e.value=!0;const a=await U(t);u.success(a.message)}finally{e.value=!1}}}},L=()=>{const e=o(!1);return{loading:e,handleCancelPublish:async(t,a)=>{y.warning({title:"要取消发布该Agent应用吗?",content:"取消发布后，WebApp以及发布的社交平台均无法使用该Agent，如需更新WebApp地址，请使用地址重新生成功能",hideCancel:!1,onOk:async()=>{try{e.value=!0;const n=await T(t);u.success(n.message)}finally{e.value=!1,a&&a()}}})}}},N=()=>{const e=o(!1),s={current_page:1,page_size:20,total_page:0,total_record:0},t=f([]),a=f({...s});return{loading:e,publishHistories:t,paginator:a,loadPublishHistories:async(r,i=!1)=>{try{if(i)Object.assign(a,{...s});else if(a.current_page>a.total_page)return;e.value=!0;const l=(await G(r,{current_page:a.current_page,page_size:a.page_size})).data;a.current_page=l.paginator.current_page,a.page_size=l.paginator.page_size,a.total_page=l.paginator.total_page,a.total_record=l.paginator.total_record,a.current_page<=a.total_page&&(a.current_page+=1),i?t.splice(0,t.length,...l.list):t.push(...l.list)}finally{e.value=!1}}}},Q=()=>{const e=o(!1);return{loading:e,handleFallbackHistoryToDraft:async(t,a,n)=>{try{e.value=!0;const r=await M(t,a);u.success(r.message)}finally{e.value=!1,n&&n()}}}},V=()=>{const e=o(!1),s=o({});return{loading:e,draftAppConfigForm:s,loadDraftAppConfig:async a=>{try{e.value=!0;const r=(await w(a)).data;s.value={dialog_round:r.dialog_round,model_config:r.model_config,preset_prompt:r.preset_prompt,long_term_memory:r.long_term_memory,opening_statement:r.opening_statement,opening_questions:r.opening_questions,suggested_after_answer:r.suggested_after_answer,review_config:r.review_config,datasets:r.datasets,retrieval_config:r.retrieval_config,tools:r.tools,workflows:r.workflows,speech_to_text:r.speech_to_text,text_to_speech:r.text_to_speech}}finally{e.value=!1}}}},X=()=>{const e=o(!1);return{loading:e,handleUpdateDraftAppConfig:async(t,a)=>{try{e.value=!0;const n=await P(t,a);u.success(n.message)}finally{e.value=!1}}}},Y=()=>{const e=o(!1),s=o("");return{loading:e,debug_conversation_summary:s,loadDebugConversationSummary:async a=>{try{e.value=!0;const r=(await $(a)).data;s.value=r.summary}finally{e.value=!1}}}},Z=()=>{const e=o(!1);return{loading:e,handleUpdateDebugConversationSummary:async(t,a)=>{try{e.value=!0;const n=await k(t,a);u.success(n.message)}finally{e.value=!1}}}},ee=()=>{const e=o(!1);return{loading:e,handleDeleteDebugConversation:async t=>{try{e.value=!0;const a=await H(t);u.success(a.message)}finally{e.value=!1}}}},ae=()=>{const e=o(!1),s=o([]),t=o(0),a={current_page:1,page_size:5,total_page:0,total_record:0},n=o({...a});return{loading:e,messages:s,paginator:n,loadDebugConversationMessages:async(i,g=!1)=>{var l;if(g)n.value={...a},t.value=0;else if(n.value.current_page>n.value.total_page)return;try{e.value=!0;const d=(await S(i,{current_page:n.value.current_page,page_size:n.value.page_size,created_at:t.value})).data;n.value=d.paginator,n.value.current_page<=n.value.total_page&&(n.value.current_page+=1),g?s.value=d.list:(s.value.push(...d.list),t.value=((l=d.list[0])==null?void 0:l.created_at)??0)}finally{e.value=!1}}}},se=()=>{const e=o(!1);return{loading:e,handleDebugChat:async(t,a,n=[],r)=>{try{e.value=!0,await W(t,a,n,r)}finally{e.value=!1}}}},te=()=>{const e=o(!1);return{loading:e,handleStopDebugChat:async(t,a)=>{try{e.value=!0,await z(t,a)}finally{e.value=!1}}}},ne=()=>{const e=o(!1),s=o({});return{loading:e,published_config:s,loadPublishedConfig:async a=>{try{e.value=!0;const n=await x(a);s.value=n.data}finally{e.value=!1}}}},oe=()=>{const e=o(!1),s=o("");return{loading:e,token:s,handleRegenerateWebAppToken:async a=>{try{e.value=!0;const n=await F(a);u.success("重新生成WebApp访问链接成功"),s.value=n.data.token}finally{e.value=!1}}}};export{B as a,q as b,E as c,j as d,J as e,N as f,Q as g,K as h,L as i,X as j,Y as k,Z as l,ee as m,ae as n,se as o,te as p,V as q,ne as r,oe as s,I as u};
