import{g,p as c,r as l,M as i,O as p}from"./index-Dwc_z1ot.js";const f=(e=1,t=10,s="")=>g("/datasets",{params:{current_page:e,page_size:t,search_word:s}}),v=e=>c("/datasets",{body:e}),y=(e,t)=>c(`/datasets/${e}`,{body:t}),D=e=>c(`/datasets/${e}/delete`),h=e=>g(`/datasets/${e}`),_=(e,t={current_page:1,page_size:20,search_word:""})=>g(`/datasets/${e}/documents`,{params:t}),$=(e,t)=>g(`/datasets/${e}/documents/${t}`),w=(e,t,s)=>c(`/datasets/${e}/documents/${t}/enabled`,{body:{enabled:s}}),S=(e,t)=>c(`/datasets/${e}/documents/${t}/delete`),U=(e,t,s)=>c(`/datasets/${e}/documents/${t}/name`,{body:{name:s}}),b=(e,t)=>c(`/datasets/${e}/hit`,{body:t}),C=e=>g(`/datasets/${e}/queries`),P=(e,t)=>c(`/datasets/${e}/documents`,{body:t}),z=(e,t)=>g(`/datasets/${e}/documents/batch/${t}`),G=(e,t,s)=>g(`/datasets/${e}/documents/${t}/segments`,{params:s}),M=(e,t,s)=>c(`/datasets/${e}/documents/${t}/segments`,{body:s}),W=(e,t,s)=>c(`/datasets/${e}/documents/${t}/segments/${s}/delete`),O=(e,t,s,a)=>c(`/datasets/${e}/documents/${t}/segments/${s}`,{body:a}),E=(e,t,s,a)=>c(`/datasets/${e}/documents/${t}/segments/${s}/enabled`,{body:{enabled:a}}),N=(e,t,s)=>g(`/datasets/${e}/documents/${t}/segments/${s}`),H=()=>{const e=l(!1),t=l([]),s={current_page:1,page_size:20,total_page:0,total_record:0},a=l(s);return{loading:e,datasets:t,paginator:a,loadDatasets:async(o=!1,r="")=>{if(o)a.value=s;else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const u=(await f(a.value.current_page,a.value.page_size,r)).data;a.value=u.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),o?t.value=u.list:t.value.push(...u.list)}finally{e.value=!1}}}},F=()=>({handleDelete:(t,s)=>{p.warning({title:"要删除知识库吗?",content:"删除知识库后，关联该知识库的应用将无法再使用该知识库，所有的提示配置和文档都将被永久删除",hideCancel:!1,onOk:async()=>{try{const a=await D(t);i.success(a.message)}finally{s&&s()}}})}}),j=()=>{const e=l(!1),s=l({fileList:[],icon:"",name:"",description:""}),a=l(),n=l(!1);return{loading:e,form:s,formRef:a,saveDataset:async d=>{try{if(e.value=!0,d!==void 0&&d!==""){const u=await y(d,{icon:s.value.icon,name:s.value.name,description:s.value.description});i.success(u.message)}else{const u=await v({icon:s.value.icon,name:s.value.name,description:s.value.description});i.success(u.message)}}finally{e.value=!1}},showUpdateModal:n,updateShowUpdateModal:(d,u)=>{n.value=d,u&&u()}}},x=()=>{const e=l(!1),t=l({});return{loading:e,dataset:t,loadDataset:async a=>{try{e.value=!0;const n=await h(a);t.value=n.data}finally{e.value=!1}}}},L=()=>{const e=l(!1),t=l([]),a=l({current_page:1,page_size:20,total_page:0,total_record:0});return{loading:e,documents:t,paginator:a,loadDocuments:async(o,r={current_page:1,page_size:20,search_word:""})=>{try{e.value=!0;const u=(await _(o,r)).data;a.value=u.paginator,t.value=u.list}finally{e.value=!1}}}},R=()=>({handleDelete:(t,s,a)=>{p.warning({title:"要删除该文档吗?",content:"删除文档后，知识库/向量数据库将无法检索到该文档，如需暂时关闭该文档的检索，可以选择禁用功能",hideCancel:!1,onOk:async()=>{try{const n=await S(t,s);i.success(n.message)}finally{a&&a()}}})}}),A=()=>({handleUpdate:async(t,s,a,n)=>{try{const o=await w(t,s,a);i.success(o.message)}finally{n&&n()}}}),B=()=>{const e=l(!1),t=l({});return{loading:e,document:t,loadDocument:async(a,n)=>{try{e.value=!0;const o=await $(a,n);t.value=o.data}finally{e.value=!1}}}},I=()=>{const e=l(!1),t=l([]),s={current_page:1,page_size:20,total_page:0,total_record:0},a=l(s);return{loading:e,segments:t,paginator:a,loadSegments:async(o,r,d=!1,u="")=>{if(d)a.value=s;else if(a.value.current_page>a.value.total_page)return;try{e.value=!0;const m=(await G(o,r,{current_page:a.value.current_page,page_size:a.value.page_size,search_word:u})).data;a.value=m.paginator,a.value.current_page<=a.value.total_page&&(a.value.current_page+=1),d?t.value=m.list:t.value.push(...m.list)}finally{e.value=!1}}}},J=()=>({handleDelete:async(t,s,a,n)=>{p.warning({title:"要删除该文档片段吗?",content:"删除文档文档后，知识库/向量数据库将无法检索到该文档，如需暂时关闭该文档的检索，可以选择禁用功能。",hideCancel:!1,onOk:async()=>{try{const o=await W(t,s,a);i.success(o.message)}finally{n&&n()}}})}}),K=()=>({handleUpdate:async(t,s,a,n,o)=>{try{const r=await E(t,s,a,n);i.success(r.message)}finally{o&&o()}}}),T=()=>{const e=l(!1),t=l([]);return{loading:e,queries:t,loadDatasetQueries:async a=>{try{e.value=!0;const n=await C(a);t.value=n.data}finally{e.value=!1}}}},V=()=>{const e=l(!1),t=l([]);return{loading:e,hits:t,handleHit:async(a,n)=>{try{e.value=!0;const o=await b(a,n);t.value=o.data}finally{e.value=!1}}}},X=()=>{const e=l(!1);return{loading:e,handleCreateSegment:async(s,a,n)=>{try{e.value=!0;const o=await M(s,a,n);i.success(o.message)}finally{e.value=!1}}}},Y=()=>{const e=l(!1);return{loading:e,handleUpdateSegment:async(s,a,n,o)=>{try{e.value=!0;const r=await O(s,a,n,o);i.success(r.message)}finally{e.value=!1}}}},Z=()=>{const e=l(!1),t=l({});return{loading:e,segment:t,loadSegment:async(a,n,o)=>{try{e.value=!0;const r=await N(a,n,o);t.value=r.data}finally{e.value=!1}}}},k=()=>{const e=l(!1),t=l({});return{loading:e,create_documents_result:t,handleCreateDocuments:async(a,n)=>{try{e.value=!0;const o=await P(a,n);t.value=o.data}finally{e.value=!1}}}},ee=()=>{const e=l(!1),t=l([]);return{loading:e,documents_status_result:t,loadDocumentsStatus:async(a,n)=>{try{e.value=!0;const o=await z(a,n);t.value=o.data}finally{e.value=!1}}}},te=()=>{const e=l(!1);return{loading:e,handleUpdateDocumentName:async(s,a,n)=>{try{e.value=!0;const o=await U(s,a,n);i.success(o.message)}finally{e.value=!1}}}};export{H as a,j as b,F as c,B as d,te as e,T as f,V as g,L as h,R as i,A as j,k,ee as l,X as m,Y as n,Z as o,I as p,J as q,K as r,x as u};
