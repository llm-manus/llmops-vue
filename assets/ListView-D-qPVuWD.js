import{h as I}from"./moment-C5S46NFB.js";import{d as K,r as w,G as P,o as U,B as v,w as l,b as x,x as r,y as c,a as e,f as o,j as C,c as u,k as f,z as a,F as g,q as $,K as z,h as y,H as W}from"./index-Ndv9oC7V.js";import{u as J,a as O}from"./use-builtin-tool-BE9DjxfM.js";const Q={class:"p-6 flex flex-col"},R={class:"flex items-center justify-between mb-6"},X={class:"flex items-center gap-2"},Y={class:"flex items-center justify-between mb-6"},Z={class:"flex items-center gap-2"},T={class:"flex items-center gap-3 mb-3"},ee=["src","alt"],te={class:"flex flex-col"},se={class:"text-base text-gray-900 font-bold"},ae={class:"text-xs text-gray-500 line-clamp-1"},le={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2"},oe={class:"flex items-center gap-1.5"},ne={class:"text-xs text-gray-400"},ce={key:0,class:""},re={class:"flex items-center gap-3 mb-3"},de=["src","alt"],ie={class:"flex flex-col"},ue={class:"text-base text-gray-900 font-bold"},_e={class:"text-xs text-gray-500 line-clamp-1"},xe={class:"leading-[18px] text-gray-500 mb-2"},ve={class:"flex flex-col gap-2"},me={class:"text-xs text-gray-500"},pe={class:"font-bold text-gray-900 mb-2"},fe={class:"text-gray-500 text-xs"},ge={key:0,class:""},ye={class:"flex flex-col gap-4"},he={class:"flex items-center gap-2 text-xs"},be={class:"text-gray-900 font-bold"},ke={class:"text-gray-500"},we={key:0,class:"text-red-700"},Ce={class:"text-xs text-gray-500"},Fe=K({__name:"ListView",setup(Be){const{categories:q,loadCategories:F}=J(),{loading:j,builtin_tools:L,loadBuiltinTools:M}=O(),_=w("all"),m=w(""),n=w(-1),d=P(()=>L.value.filter(h=>{const s=_.value==="all"||h.category===_.value,b=m.value===""||h.label.toLowerCase().includes(m.value);return s&&b}));return U(()=>{F(),M()}),(h,s)=>{const b=r("icon-common"),p=r("a-avatar"),k=r("a-button"),N=r("router-link"),D=r("a-input-search"),G=r("icon-user"),B=r("a-card"),V=r("a-col"),H=r("a-empty"),S=r("a-row"),A=r("a-drawer"),E=r("a-spin");return c(),v(E,{loading:x(j),class:"block h-full w-full"},{default:l(()=>[e("div",Q,[e("div",R,[e("div",X,[o(p,{size:32,class:"bg-blue-700"},{default:l(()=>[o(b,{size:18})]),_:1}),s[3]||(s[3]=e("div",{class:"text-lg font-medium text-gray-900"},"插件广场",-1))]),o(N,{to:{name:"space-tools-list",query:{create_type:"tool"}}},{default:l(()=>[o(k,{type:"primary",class:"rounded-lg"},{default:l(()=>s[4]||(s[4]=[C("创建自定义插件")])),_:1})]),_:1})]),e("div",Y,[e("div",Z,[o(k,{type:_.value==="all"?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:s[0]||(s[0]=t=>_.value="all")},{default:l(()=>s[5]||(s[5]=[C("全部 ")])),_:1},8,["type"]),(c(!0),u(g,null,f(x(q),t=>(c(),v(k,{key:t.category,type:_.value===t.category?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:i=>_.value=t.category},{default:l(()=>[C(a(t.name),1)]),_:2},1032,["type","onClick"]))),128))]),o(D,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),placeholder:"请输入插件名称",class:"w-[240px] bg-white rounded-lg border-gray-300"},null,8,["modelValue"])]),o(S,{gutter:[20,20],class:"flex-1"},{default:l(()=>[(c(!0),u(g,null,f(d.value,(t,i)=>(c(),v(V,{key:t.name,span:6},{default:l(()=>[o(B,{hoverable:"",class:"cursor-pointer rounded-lg",onClick:Ve=>n.value=i},{default:l(()=>[e("div",T,[o(p,{size:40,shape:"square",style:$({backgroundColor:t.background})},{default:l(()=>[e("img",{src:`${x(z)}/builtin-tools/${t.name}/icon`,alt:t.name},null,8,ee)]),_:2},1032,["style"]),e("div",te,[e("div",se,a(t.label),1),e("div",ae," 提供商 "+a(t.name)+" · "+a(t.tools.length)+" 插件 ",1)])]),e("div",le,a(t.description),1),e("div",oe,[o(p,{size:18,class:"bg-blue-700"},{default:l(()=>[o(G)]),_:1}),e("div",ne," 慕课 · 发布时间 "+a(x(I)(t.created_at*1e3).format("MM-DD HH:mm")),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128)),d.value.length===0?(c(),v(V,{key:0,span:24},{default:l(()=>[o(H,{description:"没有可用的内置插件",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):y("",!0)]),_:1}),o(A,{visible:n.value!=-1,width:350,footer:!1,title:"工具详情","drawer-style":{background:"#F9FAFB"},onCancel:s[2]||(s[2]=t=>n.value=-1)},{default:l(()=>[n.value!=-1?(c(),u("div",ce,[e("div",re,[o(p,{size:40,shape:"square",style:$({backgroundColor:d.value[n.value].background})},{default:l(()=>[e("img",{src:`${x(z)}/builtin-tools/${d.value[n.value].name}/icon`,alt:d.value[n.value].name},null,8,de)]),_:1},8,["style"]),e("div",ie,[e("div",ue,a(d.value[n.value].label),1),e("div",_e," 提供商 "+a(d.value[n.value].name)+" · "+a(d.value[n.value].tools.length)+" 插件 ",1)])]),e("div",xe,a(d.value[n.value].description),1),s[7]||(s[7]=e("hr",{class:"my-4"},null,-1)),e("div",ve,[e("div",me," 包含 "+a(d.value[n.value].tools.length)+" 个工具 ",1),(c(!0),u(g,null,f(d.value[n.value].tools,t=>(c(),v(B,{key:t.name,class:"cursor-pointer flex flex-col rounded-xl"},{default:l(()=>[e("div",pe,a(t.label),1),e("div",fe,a(t.description),1),t.inputs.length>0?(c(),u("div",ge,[s[6]||(s[6]=e("div",{class:"flex items-center gap-2 my-4"},[e("div",{class:"text-xs font-bold text-gray-500"},"参数"),e("hr",{class:"flex-1"})],-1)),e("div",ye,[(c(!0),u(g,null,f(t.inputs,i=>(c(),u("div",{key:i.name,class:"flex flex-col gap-2"},[e("div",he,[e("div",be,a(i.name),1),e("div",ke,a(x(W)[i.type]),1),i.required?(c(),u("div",we,"必填")):y("",!0)]),e("div",Ce,a(i.description),1)]))),128))])])):y("",!0)]),_:2},1024))),128))])])):y("",!0)]),_:1},8,["visible"])])]),_:1},8,["loading"])}}});export{Fe as default};
