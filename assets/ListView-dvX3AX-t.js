import{g as k,p as q,r as d,D as E,M as O,d as R,G as U,o as W,B as _,w as o,b as m,x as n,y as u,a,f as s,j as b,c as B,k as w,z as p,F as C,h as I}from"./index-DnFrRkgt.js";import{h as J}from"./moment-C5S46NFB.js";const K=()=>k("/builtin-apps/categories"),P=()=>k("/builtin-apps"),Q=l=>q("/builtin-apps/add-builtin-app-to-space",{body:{builtin_app_id:l}}),X=()=>{const l=d(!1),e=d([]);return{loading:l,categories:e,loadBuiltinAppCategories:async()=>{try{l.value=!0;const r=await K();e.value=r.data}finally{l.value=!1}}}},Y=()=>{const l=d(!1),e=d([]);return{loading:l,apps:e,loadBuiltinApps:async()=>{try{l.value=!0;const r=await P();e.value=r.data}finally{l.value=!1}}}},Z=()=>{const l=E(),e=d(!1);return{loading:e,handleAddBuiltinAppToSpace:async r=>{try{e.value=!0;const g=await Q(r);O.success("将Agent模板添加到工作区成功"),await l.push({name:"space-apps-detail",params:{app_id:g.data.id}})}finally{e.value=!1}}}},ee={class:"p-6 flex flex-col"},te={class:"flex items-center justify-between mb-6"},ae={class:"flex items-center gap-2"},se={class:"flex items-center justify-between mb-6"},oe={class:"flex items-center gap-2"},ne={class:"flex items-center gap-3 mb-3"},le={class:"flex flex-1 justify-between"},ce={class:"flex flex-col"},ie={class:"text-base text-gray-900 font-bold"},re={class:"text-xs text-gray-500 line-clamp-1"},de={class:"leading-[18px] text-gray-500 h-[72px] line-clamp-4 mb-2 break-all"},ue={class:"flex items-center gap-1.5"},pe={class:"text-xs text-gray-400"},fe=R({__name:"ListView",setup(l){const e=d("all"),i=d(""),{categories:r,loadBuiltinAppCategories:g}=X(),{loading:V,apps:S,loadBuiltinApps:z}=Y(),{handleAddBuiltinAppToSpace:L}=Z(),h=U(()=>S.value.filter(f=>{const c=e.value==="all"||f.category===e.value,y=i.value===""||f.name.toLowerCase().includes(i.value);return c&&y}));return W(()=>{g(),z()}),(f,c)=>{const y=n("icon-common"),x=n("a-avatar"),v=n("a-button"),M=n("a-input-search"),T=n("icon-more"),j=n("a-doption"),D=n("a-dropdown"),N=n("icon-user"),G=n("a-card"),A=n("a-col"),F=n("a-empty"),H=n("a-row"),$=n("a-spin");return u(),_($,{loading:m(V),class:"block h-full w-full"},{default:o(()=>[a("div",ee,[a("div",te,[a("div",ae,[s(x,{size:32,class:"bg-blue-700"},{default:o(()=>[s(y,{size:18})]),_:1}),c[2]||(c[2]=a("div",{class:"text-lg font-medium text-gray-900"},"应用广场",-1))])]),a("div",se,[a("div",oe,[s(v,{type:e.value==="all"?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:c[0]||(c[0]=t=>e.value="all")},{default:o(()=>c[3]||(c[3]=[b(" 全部 ")])),_:1},8,["type"]),(u(!0),B(C,null,w(m(r),t=>(u(),_(v,{key:t.category,type:e.value===t.category?"secondary":"text",class:"rounded-lg !text-gray-700 px-3",onClick:_e=>e.value=t.category},{default:o(()=>[b(p(t.name),1)]),_:2},1032,["type","onClick"]))),128))]),s(M,{modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=t=>i.value=t),placeholder:"请输入应用名称",class:"w-[240px] bg-white rounded-lg border-gray-300"},null,8,["modelValue"])]),s(H,{gutter:[20,20],class:"flex-1"},{default:o(()=>[(u(!0),B(C,null,w(h.value,t=>(u(),_(A,{key:t.id,span:6},{default:o(()=>[s(G,{hoverable:"",class:"cursor-pointer rounded-lg"},{default:o(()=>[a("div",ne,[s(x,{size:40,shape:"square","image-url":t.icon},null,8,["image-url"]),a("div",le,[a("div",ce,[a("div",ie,p(t.name),1),a("div",re,p(t.model_config.provider)+" · "+p(t.model_config.model),1)]),s(D,{position:"br"},{content:o(()=>[s(j,{onClick:async()=>await m(L)(t.id)},{default:o(()=>c[4]||(c[4]=[b(" 添加到工作区 ")])),_:2},1032,["onClick"])]),default:o(()=>[s(v,{type:"text",size:"small",class:"rounded-lg !text-gray-700"},{icon:o(()=>[s(T)]),_:1})]),_:2},1024)])]),a("div",de,p(t.description),1),a("div",ue,[s(x,{size:18,class:"bg-blue-700"},{default:o(()=>[s(N)]),_:1}),a("div",pe," LLMOps · 发布时间 "+p(m(J)(t.created_at).format("MM-DD HH:mm")),1)])]),_:2},1024)]),_:2},1024))),128)),h.value.length===0?(u(),_(A,{key:0,span:24},{default:o(()=>[s(F,{description:"没有可用的内置Agent智能体",class:"h-[400px] flex flex-col items-center justify-center"})]),_:1})):I("",!0)]),_:1})])]),_:1},8,["loading"])}}});export{fe as default};
